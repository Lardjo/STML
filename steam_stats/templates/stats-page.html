{% extends "index.html" %}

{% block scripts %}
<script type="text/javascript" xmlns="http://www.w3.org/1999/html">

    var data = [
        {
            value : {{ info.games.best1.hours }},
            color : "#999999"
        },
        {
            value : {{ info.games.best2.hours }},
            color : "#468847"
        },
        {
            value : {{ info.games.best3.hours }},
            color : "#f89406"
        },
        {
            value : {{ info.games.best4.hours }},
            color : "#b94a48"
        },
        {
            value : {{ info.games.best5.hours }},
            color : "#3a87ad"
        },
        {
            value : {{ info.games.best6.hours }},
            color : "#333333"
        }
            ];

    var ctx = document.getElementById("myChart").getContext("2d");
    var myNewChart = new Chart(ctx).Pie(data);

</script>
    {{ super() }}
{% endblock %}

{% block content %}
<div class="main general">
    <div class="container">
        <div class="row-fluid">
            <div class="span6">
                <img src="{{ info.user_info.avatar }}" class="img-rounded image-size pull-left" />
                <h2>{{ info.nickname }} <small>{{ info.user_info.realname }}</small></h2>
                <p class="city">{{ info.user_info.location }}</p>
            </div>
            <div class="span6">
                {% if info.user_info.status == "in-game" %}
                <h3 class="text-success">Now playing</h3>
                <p class="game">{{ info.user_info.ingameinfo }}</p>
                {% elif info.user_info.status == "online" %}
                <h3 class="text-success">Online</h3>
                {% else %}
                <h3 class="text-error">Offline</h3>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="span5">
            <div class="well well-large well-margin">
                <p><strong>Perfonal Info</strong></p>
                <hr class="separator">
                <p><i class="icon-check"></i><strong> Name:</strong> {{ info.user_info.realname }}</p>
                <p><i class="icon-check"></i><strong> Nickname:</strong> {{ info.nickname }}</p>
                <p><i class="icon-check"></i><strong> Steam ID:</strong> {{ info.steamid }}</p>
                <p><i class="icon-check"></i><strong> Member Since:</strong> {{ info.user_info.membersince }}</p>
                <p><i class="icon-check"></i><strong> Location:</strong> {{ info.user_info.location }}</p>
                <p><i class="icon-check"></i><strong> Privacy:</strong> {{ info.user_info.privacy }}</p>
            </div>
        </div>
        <div class="span7">
            <div class="well well-large well-margin">
                <div class="row-fluid">
                    <div class="span5">
                        <canvas id="myChart" width="218" height="218"></canvas>
                    </div>
                    <div class="span7">
                        <p><strong>Top 6 Games</strong></p>
                        <p><span class="badge">{{ info.games.best1.hours }} hours</span>
                            {{ info.games.best1.name }}</p>
                        <p><span class="badge badge-success">{{ info.games.best2.hours }} hours</span>
                            {{ info.games.best2.name }}</p>
                        <p><span class="badge badge-warning">{{ info.games.best3.hours }} hours</span>
                            {{ info.games.best3.name }}</p>
                        <p><span class="badge badge-important">{{ info.games.best4.hours }} hours</span>
                            {{ info.games.best4.name }}</p>
                        <p><span class="badge badge-info">{{ info.games.best5.hours }} hours</span>
                            {{ info.games.best5.name }}</p>
                        <p><span class="badge badge-inverse">{{ info.games.best6.hours }} hours</span>
                            {{ info.games.best6.name }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="well well-large">
        <p><b>The last game in Dota 2</b></p>
        <hr class="separator">
        <div class="row-fluid">
            <div class="span4">
                <p><i class="icon-globe" id="icon"></i><b>Match:</b> {{ info.dota_info.match_id }}</p>
                <p><i class="icon-calendar" id="icon"></i><b>Data:</b> {{ info.dota_info.start_time }}</p>
                <p><i class="icon-time" id="icon"></i><b>Duration:</b> {{ info.dota_info.duration }}</p>
            </div>
            <div class="span4">
                <p><i class="icon-list-alt" id="icon"></i><b>Game Mode:</b> {{ info.dota_info.game_mode }}</p>
                <p><i class="icon-hdd" id="icon"></i><b>Server:</b> {{ info.dota_info.cluster }}</p>
                <p><i class="icon-time" id="icon"></i><b>First Blood:</b> {{ info.dota_info.first_blood }}</p>
            </div>
            <div class="span4">
                <p class="watch-btn">
                    <a class="btn btn-small btn-inverse" href="dota2://matchid={{ info.dota_info.match_id }}">
                        <i class="icon-film icon-white"></i> Watch Replay
                    </a>
                </p>
                <div class="row-fluid">
                    <div class="span6">
                        <p class="text-success">
                            <i class="icon-thumbs-up" id="icon"></i>{{ info.dota_info.positive_votes }}
                        </p>
                    </div>
                    <div class="span6">
                        <p class="text-error">
                            <i class="icon-thumbs-down" id="icon"></i>{{ info.dota_info.negative_votes }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="text-success">
                        {% if info.dota_info.radiant_win == 'true' %}Radiant Victory!{% else %}The Radiant{% endif %}
                    </th>
                </tr>
                <tr>
                    <th class="muted">Player</th>
                    <th class="muted">Hero</th>
                    <th class="muted" colspan="6">Items</th>
                    <th class="muted">DN</th>
                    <th class="muted">LH</th>
                    <th class="muted">XPM</th>
                    <th class="muted">GPM</th>
                    <th class="muted">KDA</th>
                </tr>
            </thead>
            <tbody>
            {% for item in info.dota_players[:5] %}
                <tr>
                    <td>{{ item['nickname'] }}</td>
                    <td style="width: 80px; padding: 1px;">
                        <div style="position: relative;">
                            <img src="{{ item['hero_avatar'] }}" />
                            <div class="label-hero"><h6>{{ item['level'] }} Level</h6></div>
                        </div>
                    </td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_0'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_1'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_2'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_3'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_4'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_5'] }}" /></td>
                    <td style="width: 40px;">{{ item['dn'] }}</td>
                    <td style="width: 40px;">{{ item['lh'] }}</td>
                    <td style="width: 40px;">{{ item['xpm'] }}</td>
                    <td style="width: 40px;">{{ item['gpm'] }}</td>
                    <td style="width: 200px">
                        <div class="progress progress-margin">
                            <div class="bar bar-success" style="width: {{ item['wkills'] }}%;">
                                {{ item['kills'] }}
                            </div>
                            <div class="bar bar-danger" style="width: {{ item['wdeaths'] }}%;">
                                {{ item['deaths'] }}
                            </div>
                            <div class="bar bar-warning" style="width: {{ item['wassists'] }}%;">
                                {{ item['assists'] }}
                            </div>
                        </div>

                    </td>

                </tr>
            {% endfor %}
            </tbody>
            <thead>
            <tr>
                <th class="text-error" colspan="13">
                    {% if info.dota_info.radiant_win == 'false' %}Dire Victory!{% else %}The Dire{% endif %}
                </th>
            </tr>
            </thead>
            <tbody>
            {% for item in info.dota_players[5:] %}
                <tr>
                    <td>{{ item['nickname'] }}</td>
                    <td style="width: 80px; padding: 1px;">
                        <div style="position: relative;">
                            <img src="{{ item['hero_avatar'] }}" />
                            <div class="label-hero"><h6>{{ item['level'] }} Level</h6></div>
                        </div>
                    </td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_0'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_1'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_2'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_3'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_4'] }}" /></td>
                    <td style="width: 60px; padding: 1px;"><img src="{{ item['item_5'] }}" /></td>
                    <td style="width: 40px;">{{ item['dn'] }}</td>
                    <td style="width: 40px;">{{ item['lh'] }}</td>
                    <td style="width: 40px;">{{ item['xpm'] }}</td>
                    <td style="width: 40px;">{{ item['gpm'] }}</td>
                    <td style="width: 200px">
                        <div class="progress progress-margin">
                            <div class="bar bar-success" style="width: {{ item['wkills'] }}%;">
                                {{ item['kills'] }}
                            </div>
                            <div class="bar bar-danger" style="width: {{ item['wdeaths'] }}%;">
                                {{ item['deaths'] }}
                            </div>
                            <div class="bar bar-warning" style="width: {{ item['wassists'] }}%;">
                                {{ item['assists'] }}
                            </div>
                        </div>

                    </td>

                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="row">
        <div class="span7">
            <div class="well well-large">
                <p><strong>Games Info</strong></p>
                <hr class="separator">
                <div class="row-fluid">
                    <div class="span7">
                        <p><i class="icon-eye-open" id="icon"></i><b>Games (without DLC):</b> {{ info.games.count }}</p>
                        <p><i class="icon-globe" id="icon"></i><b>Steam rating:</b> {{ info.user_info.rating }}</p>
                        <p><i class="icon-time" id="icon"></i><b>Played past 2 weeks:</b> {{ info.user_info.hoursplayed }} Hours</p>
                        <p><i class="icon-time" id="icon"></i><b>Total playing time:</b> {{ info.games.time }} Hours (or {{ info.games.time // 24 }} days)</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <p class="muted">This page was last updated on {{ info.lastupdate|datetime('%d %B %Y, at %H:%M:%S') }}</p>
</div>
{% endblock %}